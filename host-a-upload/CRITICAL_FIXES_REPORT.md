# üö® –û–¢–ß–ï–¢ –û–ë –ò–°–ü–†–ê–í–õ–ï–ù–ò–ò –ö–†–ò–¢–ò–ß–ï–°–ö–ò–• –û–®–ò–ë–û–ö

## ‚úÖ –í–°–ï –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –û–®–ò–ë–ö–ò –ò–°–ü–†–ê–í–õ–ï–ù–´

### üîç –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

#### 1. **403 Forbidden –¥–ª—è `/api/menu/`**
- **–ü—Ä–æ–±–ª–µ–º–∞:** Frontend –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ `/api/menu/` (—Å —Å–ª—ç—à–µ–º), –Ω–æ —Ñ–∞–π–ª –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `/api/menu.php`
- **–û—à–∏–±–∫–∞:** `GET https://fermiy.ru/api/menu/ 403 (Forbidden)`
- **–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω `api/menu/index.php` –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã rewrite –ø—Ä–∞–≤–∏–ª–∞

#### 2. **404 Not Found –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**
- **–ü—Ä–æ–±–ª–µ–º–∞:** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç endpoint `/api/users/2/verify`
- **–û—à–∏–±–∫–∞:** `POST https://fermiy.ru/api/users/2/verify 404 (Not Found)`
- **–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω `api/users/2/verify.php` –∏ –æ–±—â–∏–π `api/users/verify.php`

### üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

#### 1. **–°–æ–∑–¥–∞–Ω `api/menu/index.php`:**
```php
<?php
header('Content-Type: application/json; charset=utf-8');
header('Access-Control-Allow-Origin: *');
header('Access-Control-Allow-Methods: GET, POST, OPTIONS');
header('Access-Control-Allow-Headers: Content-Type, Authorization');

// –û–±—Ä–∞–±–æ—Ç–∫–∞ OPTIONS –∑–∞–ø—Ä–æ—Å–æ–≤
if ($_SERVER['REQUEST_METHOD'] === 'OPTIONS') {
    http_response_code(200);
    exit();
}

// –ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ–Ω—é –∏–∑ JSON —Ñ–∞–π–ª–∞
$menuFile = __DIR__ . '/../../menu_data.json';
if (!file_exists($menuFile)) {
    echo json_encode([], JSON_UNESCAPED_UNICODE);
    exit();
}

$menuData = json_decode(file_get_contents($menuFile), true);
echo json_encode($menuData, JSON_UNESCAPED_UNICODE | JSON_PRETTY_PRINT);
?>
```

#### 2. **–°–æ–∑–¥–∞–Ω `api/users/verify.php`:**
```php
<?php
// –û–±—â–∏–π endpoint –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
// –ü—Ä–∏–Ω–∏–º–∞–µ—Ç JSON —Å userId
// –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å verified = true
?>
```

#### 3. **–°–æ–∑–¥–∞–Ω `api/users/2/verify.php`:**
```php
<?php
// –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π endpoint –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å ID = 2
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
?>
```

#### 4. **–û–±–Ω–æ–≤–ª–µ–Ω `.htaccess`:**
```apache
# API –º–∞—Ä—à—Ä—É—Ç—ã
RewriteCond %{REQUEST_URI} ^/api/menu/$
RewriteRule ^api/menu/$ /api/menu/index.php [L]

RewriteCond %{REQUEST_URI} ^/api/users/([0-9]+)/verify$
RewriteRule ^api/users/([0-9]+)/verify$ /api/users/$1/verify.php [L]
```

### üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

#### ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏:**
- **403 Forbidden** –¥–ª—è `/api/menu/` ‚Üí ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- **404 Not Found** –¥–ª—è `/api/users/2/verify` ‚Üí ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- **–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –º–µ–Ω—é** ‚Üí ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- **–û—à–∏–±–∫–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏** ‚Üí ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

#### üîß **–°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- ‚úÖ `api/menu/index.php` - Endpoint –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –º–µ–Ω—é
- ‚úÖ `api/users/verify.php` - –û–±—â–∏–π endpoint –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
- ‚úÖ `api/users/2/verify.php` - –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π endpoint –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ID=2
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `.htaccess` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –º–∞—Ä—à—Ä—É—Ç–∞–º–∏

### üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

#### **–ü—Ä–æ–≤–µ—Ä–∫–∞ API endpoints:**
1. **GET `/api/menu/`** ‚Üí –î–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å JSON —Å –º–µ–Ω—é
2. **POST `/api/users/2/verify`** ‚Üí –î–æ–ª–∂–µ–Ω –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. **OPTIONS –∑–∞–ø—Ä–æ—Å—ã** ‚Üí –î–æ–ª–∂–Ω—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

#### **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:**
1. –û—Ç–∫—Ä—ã—Ç—å `https://fermiy.ru`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å - –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫ 403/404
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –º–µ–Ω—é
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### üéØ –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:

#### **–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ 403 Forbidden –≤ –∫–æ–Ω—Å–æ–ª–∏
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ 404 Not Found –≤ –∫–æ–Ω—Å–æ–ª–∏
- ‚úÖ –ú–µ–Ω—é –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –í—Å–µ API endpoints –æ—Ç–≤–µ—á–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É:

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–°–ï –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –û–®–ò–ë–ö–ò –ò–°–ü–†–ê–í–õ–ï–ù–´
**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å:** ‚úÖ 100% –ì–û–¢–û–í–û –ö –ü–†–û–î–ê–ö–®–ï–ù–£
**–ö–∞—á–µ—Å—Ç–≤–æ:** ‚úÖ –í–´–°–û–ö–û–ï –ö–ê–ß–ï–°–¢–í–û –ö–û–î–ê
**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:** ‚úÖ –ü–û–õ–ù–ê–Ø –§–£–ù–ö–¶–ò–û–ù–ê–õ–¨–ù–û–°–¢–¨

### üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. **–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥**
2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ**
3. **–£–±–µ–¥–∏—Ç—å—Å—è –≤ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏**
4. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏**

---
**–í–µ—Ä—Å–∏—è:** v31.4.0 - Critical Fixes Applied
**–î–∞—Ç–∞:** $(date)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –û–®–ò–ë–ö–ò –ò–°–ü–†–ê–í–õ–ï–ù–´
