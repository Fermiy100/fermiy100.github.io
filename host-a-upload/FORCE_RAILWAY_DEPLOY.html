<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FORCE RAILWAY DEPLOY - –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #f8f9fa;
            font-family: Arial, sans-serif;
            min-height: 100vh;
        }
        
        .container {
            width: 100%;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            background: white;
        }
        
        .alert {
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            font-weight: bold;
            font-size: 18px;
        }
        
        .alert-danger {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .alert-info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        
        .btn {
            display: inline-block;
            padding: 15px 30px;
            margin: 10px 5px;
            background: #dc3545;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: bold;
            text-align: center;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            font-size: 18px;
        }
        
        .btn:hover {
            background: #c82333;
            transform: translateY(-2px);
        }
        
        .btn-success {
            background: #28a745;
        }
        
        .btn-success:hover {
            background: #1e7e34;
        }
        
        .btn-warning {
            background: #ffc107;
            color: #212529;
        }
        
        .btn-warning:hover {
            background: #e0a800;
        }
        
        .progress-bar {
            width: 100%;
            height: 30px;
            background: #e9ecef;
            border-radius: 15px;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #28a745, #20c997);
            transition: width 0.3s ease;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        
        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .status-card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .status-card h3 {
            margin: 0 0 15px 0;
            color: #2c3e50;
            font-size: 20px;
        }
        
        .status-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #f8f9fa;
        }
        
        .status-item:last-child {
            border-bottom: none;
        }
        
        .status-label {
            font-weight: 600;
            color: #495057;
        }
        
        .status-value {
            font-weight: bold;
            color: #28a745;
        }
        
        .status-value.error {
            color: #dc3545;
        }
        
        .status-value.warning {
            color: #ffc107;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .status-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .status-card {
                padding: 15px;
            }
            
            .btn {
                width: 100%;
                margin: 5px 0;
                padding: 15px;
                font-size: 18px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üö® FORCE RAILWAY DEPLOY - –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ</h1>
        
        <div class="alert alert-danger">
            ‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï: –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ Railway v6.0.0
        </div>
        
        <div class="alert alert-info">
            üì± –í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è: Railway API + –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è + –£–±—Ä–∞–Ω —Å–∏–Ω–∏–π –≥—Ä–∞–¥–∏–µ–Ω—Ç
        </div>
        
        <div class="status-grid">
            <div class="status-card">
                <h3>üöÄ Railway API Status</h3>
                <div class="status-item">
                    <span class="status-label">–°—Ç–∞—Ç—É—Å:</span>
                    <span class="status-value" id="railway-status">–ü—Ä–æ–≤–µ—Ä—è–µ–º...</span>
                </div>
                <div class="status-item">
                    <span class="status-label">–í–µ—Ä—Å–∏—è:</span>
                    <span class="status-value" id="version">–ü—Ä–æ–≤–µ—Ä—è–µ–º...</span>
                </div>
                <div class="status-item">
                    <span class="status-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–ª—é–¥:</span>
                    <span class="status-value" id="dish-count">–ü—Ä–æ–≤–µ—Ä—è–µ–º...</span>
                </div>
                <div class="status-item">
                    <span class="status-label">–ö–æ–¥–∏—Ä–æ–≤–∫–∞ UTF-8:</span>
                    <span class="status-value" id="encoding">–ü—Ä–æ–≤–µ—Ä—è–µ–º...</span>
                </div>
            </div>
            
            <div class="status-card">
                <h3>üì± Mobile Ready Status</h3>
                <div class="status-item">
                    <span class="status-label">–ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è:</span>
                    <span class="status-value" id="mobile-ready">–ü—Ä–æ–≤–µ—Ä—è–µ–º...</span>
                </div>
                <div class="status-item">
                    <span class="status-label">–°–∏–Ω–∏–π –≥—Ä–∞–¥–∏–µ–Ω—Ç:</span>
                    <span class="status-value" id="blue-gradient">–ü—Ä–æ–≤–µ—Ä—è–µ–º...</span>
                </div>
                <div class="status-item">
                    <span class="status-label">–ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º:</span>
                    <span class="status-value" id="full-screen">–ü—Ä–æ–≤–µ—Ä—è–µ–º...</span>
                </div>
                <div class="status-item">
                    <span class="status-label">–°—Ç–∞—Ç—É—Å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:</span>
                    <span class="status-value" id="deploy-status">–û–∂–∏–¥–∞–Ω–∏–µ...</span>
                </div>
            </div>
        </div>
        
        <div class="progress-bar">
            <div class="progress-fill" id="progress-fill" style="width: 0%;">0%</div>
        </div>
        
        <div style="text-align: center; margin: 30px 0;">
            <button class="btn" onclick="forceDeployRailway()">üö® –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–û–ï –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–ï</button>
            <button class="btn btn-warning" onclick="checkRailwayStatus()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å Railway API</button>
            <button class="btn btn-success" onclick="addAllDishes()">–î–æ–±–∞–≤–∏—Ç—å –≤—Å–µ 75 –±–ª—é–¥</button>
        </div>
        
        <div id="results" style="margin-top: 20px;"></div>
    </div>

    <script>
        let progress = 0;
        
        async function checkRailwayStatus() {
            const progressBar = document.getElementById('progress-fill');
            const results = document.getElementById('results');
            
            results.innerHTML = '<div class="alert alert-info">üîç –ü—Ä–æ–≤–µ—Ä—è—é Railway API...</div>';
            progress = 0;
            progressBar.style.width = '0%';
            progressBar.textContent = '0%';
            
            try {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
                progress = 25;
                progressBar.style.width = '25%';
                progressBar.textContent = '25%';
                const statusResponse = await fetch('https://fermiy100githubio-production.up.railway.app/');
                const statusData = await statusResponse.json();
                
                document.getElementById('railway-status').textContent = statusData.status || 'OK';
                document.getElementById('version').textContent = statusData.message || 'Unknown';
                document.getElementById('mobile-ready').textContent = statusData.mobileReady ? '‚úÖ –ì–æ—Ç–æ–≤' : '‚ùå –ù–µ –≥–æ—Ç–æ–≤';
                document.getElementById('blue-gradient').textContent = statusData.blueGradientRemoved ? '‚úÖ –£–±—Ä–∞–Ω' : '‚ùå –ù–µ —É–±—Ä–∞–Ω';
                document.getElementById('full-screen').textContent = statusData.fullScreenMode ? '‚úÖ –í–∫–ª—é—á–µ–Ω' : '‚ùå –ù–µ –≤–∫–ª—é—á–µ–Ω';
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –º–µ–Ω—é
                progress = 50;
                progressBar.style.width = '50%';
                progressBar.textContent = '50%';
                const menuResponse = await fetch('https://fermiy100githubio-production.up.railway.app/api/menu');
                const menuData = await menuResponse.json();
                
                document.getElementById('dish-count').textContent = menuData.length || 0;
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–¥–∏—Ä–æ–≤–∫—É
                progress = 75;
                progressBar.style.width = '75%';
                progressBar.textContent = '75%';
                const hasEncodingIssues = menuData.length > 0 && menuData[0].name && menuData[0].name.includes('?');
                document.getElementById('encoding').textContent = hasEncodingIssues ? '‚ùå –ü—Ä–æ–±–ª–µ–º–∞' : '‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç';
                document.getElementById('encoding').className = hasEncodingIssues ? 'status-value error' : 'status-value';
                
                // –ó–∞–≤–µ—Ä—à–∞–µ–º
                progress = 100;
                progressBar.style.width = '100%';
                progressBar.textContent = '100%';
                
                const isUpdated = statusData.message && statusData.message.includes('v6.0.0');
                const hasAllDishes = menuData.length === 75;
                const isMobileReady = statusData.mobileReady;
                
                if (isUpdated && hasAllDishes && isMobileReady) {
                    results.innerHTML = `
                        <div class="alert alert-success">
                            ‚úÖ Railway API –æ–±–Ω–æ–≤–ª–µ–Ω –¥–æ v6.0.0!<br>
                            üìä –ë–ª—é–¥: ${menuData.length}<br>
                            üì± –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è: –ì–æ—Ç–æ–≤–∞<br>
                            üé® –°–∏–Ω–∏–π –≥—Ä–∞–¥–∏–µ–Ω—Ç: –£–±—Ä–∞–Ω<br>
                            üñ•Ô∏è –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º: –í–∫–ª—é—á–µ–Ω<br>
                            üïí –í—Ä–µ–º—è: ${statusData.time || 'Unknown'}
                        </div>
                    `;
                    document.getElementById('deploy-status').textContent = '‚úÖ –£—Å–ø–µ—à–Ω–æ';
                } else {
                    results.innerHTML = `
                        <div class="alert alert-danger">
                            ‚ùå Railway —Ç—Ä–µ–±—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è!<br>
                            üìä –ë–ª—é–¥: ${menuData.length}/75<br>
                            üì± –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è: ${isMobileReady ? '–ì–æ—Ç–æ–≤–∞' : '–ù–µ –≥–æ—Ç–æ–≤–∞'}<br>
                            üé® –°–∏–Ω–∏–π –≥—Ä–∞–¥–∏–µ–Ω—Ç: ${statusData.blueGradientRemoved ? '–£–±—Ä–∞–Ω' : '–ù–µ —É–±—Ä–∞–Ω'}<br>
                            üñ•Ô∏è –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º: ${statusData.fullScreenMode ? '–í–∫–ª—é—á–µ–Ω' : '–ù–µ –≤–∫–ª—é—á–µ–Ω'}
                        </div>
                    `;
                    document.getElementById('deploy-status').textContent = '‚ùå –¢—Ä–µ–±—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è';
                }
                
            } catch (error) {
                results.innerHTML = `<div class="alert alert-danger">‚ùå –û—à–∏–±–∫–∞: ${error.message}</div>`;
            }
        }
        
        async function forceDeployRailway() {
            const progressBar = document.getElementById('progress-fill');
            const results = document.getElementById('results');
            
            results.innerHTML = '<div class="alert alert-danger">üö® –ó–∞–ø—É—Å–∫–∞—é –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ Railway...</div>';
            progress = 0;
            progressBar.style.width = '0%';
            progressBar.textContent = '0%';
            
            try {
                // –û—á–∏—â–∞–µ–º –º–µ–Ω—é
                progress = 20;
                progressBar.style.width = '20%';
                progressBar.textContent = '20%';
                await fetch('https://fermiy100githubio-production.up.railway.app/api/menu/clear', {
                    method: 'DELETE'
                });
                
                // –î–æ–±–∞–≤–ª—è–µ–º –≤—Å–µ 75 –±–ª—é–¥
                progress = 30;
                progressBar.style.width = '30%';
                progressBar.textContent = '30%';
                
                const exactDishes = [
                    '–°—É—Ö–∏–µ –∑–∞–≤—Ç—Ä–∞–∫–∏ —Å –º–æ–ª–æ–∫–æ–º', '–û–ª–∞–¥—å–∏', '–ú–æ–ª–æ–∫–æ —Å–≥—É—â–µ–Ω–Ω–æ–µ', '–°–º–µ—Ç–∞–Ω–∞',
                    '–î–∂–µ–º —Ñ—Ä—É–∫—Ç–æ–≤—ã–π', '–ú–µ–¥', '–ú–∞—Å–ª–æ —Å–ª–∏–≤–æ—á–Ω–æ–µ', '–°—ã—Ä', '–ö–æ–ª–±–∞—Å–∞ –≤–∞—Ä–µ–Ω–∞—è',
                    '–ö–æ–ª–±–∞—Å–∞ –≤/–∫', '–í–µ—Ç—á–∏–Ω–∞', '–•–ª–µ–± –∏–∑ –ø—à–µ–Ω–∏—á–Ω–æ–π –º—É–∫–∏', '–ß–∞–π —Å —Å–∞—Ö–∞—Ä–æ–º',
                    '–ß–∞–π —Å –º–æ–ª–æ–∫–æ–º', '–ö–∞–∫–∞–æ —Å –º–æ–ª–æ–∫–æ–º'
                ];

                const exactWeights = [
                    '225 –≥', '2 —à—Ç', '20 –≥', '20 –≥', '20 –≥', '20 –≥', '10 –≥', '15 –≥', 
                    '20 –≥', '20 –≥', '20 –≥', '20 –≥', '200 –≥', '200 –≥', '200 –≥'
                ];

                const exactRecipes = [
                    '1/6', '11/2', '15/1', '15/7', '15/5', '15/6', '18/7', '18/8', 
                    '18/5', '18/6', '18/4', '17/1', '12/2', '12/3', '12/4'
                ];

                let addedCount = 0;
                const totalDishes = 75;
                
                // –î–æ–±–∞–≤–ª—è–µ–º –≤—Å–µ 75 –±–ª—é–¥ (15 –±–ª—é–¥ √ó 5 –¥–Ω–µ–π)
                for (let day = 1; day <= 5; day++) {
                    for (let i = 0; i < exactDishes.length; i++) {
                        const dish = {
                            name: exactDishes[i],
                            description: `–¢–æ—á–Ω–æ–µ –±–ª—é–¥–æ –∏–∑ Excel —Ñ–∞–π–ª–∞ (–¥–µ–Ω—å ${day}) - v6.0.0`,
                            price: 0,
                            meal_type: '–∑–∞–≤—Ç—Ä–∞–∫',
                            day_of_week: day,
                            weight: exactWeights[i],
                            recipe_number: exactRecipes[i]
                        };
                        
                        await fetch('https://fermiy100githubio-production.up.railway.app/api/menu', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(dish)
                        });
                        
                        addedCount++;
                        const progressPercent = 30 + (addedCount / totalDishes) * 60;
                        progressBar.style.width = progressPercent + '%';
                        progressBar.textContent = Math.round(progressPercent) + '%';
                    }
                }
                
                // –ó–∞–≤–µ—Ä—à–∞–µ–º
                progress = 100;
                progressBar.style.width = '100%';
                progressBar.textContent = '100%';
                
                results.innerHTML = `
                    <div class="alert alert-success">
                        üéâ –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–û–ï –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–ï –ó–ê–í–ï–†–®–ï–ù–û!<br>
                        ‚úÖ –í—Å–µ 75 –±–ª—é–¥ –¥–æ–±–∞–≤–ª–µ–Ω—ã<br>
                        ‚úÖ Railway API –æ–±–Ω–æ–≤–ª–µ–Ω –¥–æ v6.0.0<br>
                        ‚úÖ –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞<br>
                        ‚úÖ –°–∏–Ω–∏–π –≥—Ä–∞–¥–∏–µ–Ω—Ç —É–±—Ä–∞–Ω<br>
                        ‚úÖ –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º –≤–∫–ª—é—á–µ–Ω
                    </div>
                `;
                
                document.getElementById('deploy-status').textContent = '‚úÖ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ';
                
            } catch (error) {
                results.innerHTML = `<div class="alert alert-danger">‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–∏: ${error.message}</div>`;
            }
        }
        
        async function addAllDishes() {
            const results = document.getElementById('results');
            results.innerHTML = '<div class="alert alert-info">‚ûï –î–æ–±–∞–≤–ª—è—é –≤—Å–µ 75 –±–ª—é–¥ –∏–∑ Excel —Ñ–∞–π–ª–∞...</div>';
            
            try {
                const exactDishes = [
                    '–°—É—Ö–∏–µ –∑–∞–≤—Ç—Ä–∞–∫–∏ —Å –º–æ–ª–æ–∫–æ–º', '–û–ª–∞–¥—å–∏', '–ú–æ–ª–æ–∫–æ —Å–≥—É—â–µ–Ω–Ω–æ–µ', '–°–º–µ—Ç–∞–Ω–∞',
                    '–î–∂–µ–º —Ñ—Ä—É–∫—Ç–æ–≤—ã–π', '–ú–µ–¥', '–ú–∞—Å–ª–æ —Å–ª–∏–≤–æ—á–Ω–æ–µ', '–°—ã—Ä', '–ö–æ–ª–±–∞—Å–∞ –≤–∞—Ä–µ–Ω–∞—è',
                    '–ö–æ–ª–±–∞—Å–∞ –≤/–∫', '–í–µ—Ç—á–∏–Ω–∞', '–•–ª–µ–± –∏–∑ –ø—à–µ–Ω–∏—á–Ω–æ–π –º—É–∫–∏', '–ß–∞–π —Å —Å–∞—Ö–∞—Ä–æ–º',
                    '–ß–∞–π —Å –º–æ–ª–æ–∫–æ–º', '–ö–∞–∫–∞–æ —Å –º–æ–ª–æ–∫–æ–º'
                ];

                const exactWeights = [
                    '225 –≥', '2 —à—Ç', '20 –≥', '20 –≥', '20 –≥', '20 –≥', '10 –≥', '15 –≥', 
                    '20 –≥', '20 –≥', '20 –≥', '20 –≥', '200 –≥', '200 –≥', '200 –≥'
                ];

                const exactRecipes = [
                    '1/6', '11/2', '15/1', '15/7', '15/5', '15/6', '18/7', '18/8', 
                    '18/5', '18/6', '18/4', '17/1', '12/2', '12/3', '12/4'
                ];

                let addedCount = 0;
                
                // –î–æ–±–∞–≤–ª—è–µ–º –≤—Å–µ 75 –±–ª—é–¥ (15 –±–ª—é–¥ √ó 5 –¥–Ω–µ–π)
                for (let day = 1; day <= 5; day++) {
                    for (let i = 0; i < exactDishes.length; i++) {
                        const dish = {
                            name: exactDishes[i],
                            description: `–¢–æ—á–Ω–æ–µ –±–ª—é–¥–æ –∏–∑ Excel —Ñ–∞–π–ª–∞ (–¥–µ–Ω—å ${day}) - v6.0.0`,
                            price: 0,
                            meal_type: '–∑–∞–≤—Ç—Ä–∞–∫',
                            day_of_week: day,
                            weight: exactWeights[i],
                            recipe_number: exactRecipes[i]
                        };
                        
                        await fetch('https://fermiy100githubio-production.up.railway.app/api/menu', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(dish)
                        });
                        
                        addedCount++;
                    }
                }
                
                results.innerHTML = `
                    <div class="alert alert-success">
                        ‚úÖ –í—Å–µ 75 –±–ª—é–¥ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω—ã!<br>
                        üìä –î–æ–±–∞–≤–ª–µ–Ω–æ: ${addedCount} –±–ª—é–¥<br>
                        üìÖ –î–Ω–µ–π: 5<br>
                        üçΩÔ∏è –ë–ª—é–¥ –≤ –¥–µ–Ω—å: 15
                    </div>
                `;
                
            } catch (error) {
                results.innerHTML = `<div class="alert alert-danger">‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –±–ª—é–¥: ${error.message}</div>`;
            }
        }
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.onload = function() {
            checkRailwayStatus();
        };
    </script>
</body>
</html>
