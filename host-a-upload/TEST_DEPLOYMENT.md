# üß™ –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê –ù–ê FERMIY.RU

**–ü—Ä–æ–±–ª–µ–º–∞**: 500 Internal Server Error  
**–ü—Ä–∏—á–∏–Ω–∞**: –ù–µ—Ç PHP –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –∏–ª–∏ –æ—à–∏–±–∫–∞ –≤ –∫–æ–¥–µ

## üîß –†–ï–®–ï–ù–ò–ï

### 1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ `index.php` –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥
```
–§–∞–π–ª: host-a-upload/index.php
–ú–µ—Å—Ç–æ: –∫–æ—Ä–µ–Ω—å —Å–∞–π—Ç–∞ (fermiy.ru/)
```

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
```bash
chmod 644 index.php
chmod 755 api/
chmod 600 data/users.json
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ .htaccess
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ .htaccess –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω:
```apache
RewriteEngine On

# –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨
<FilesMatch "(users|menu|orders)\.json$">
    Require all denied
</FilesMatch>

# API routing
RewriteRule ^api/profile/update$ api/profile/update.php [L]
RewriteRule ^api/users/([0-9]+)/delete$ api/users/delete.php [L]

# Frontend routing
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php [QSA,L]
```

### 4. –ú–∏–≥—Ä–∞—Ü–∏—è –ø–∞—Ä–æ–ª–µ–π (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!)
```bash
php api/auth/migrate-passwords.php
```

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### –¢–µ—Å—Ç 1: –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
```
URL: https://fermiy.ru
–û–∂–∏–¥–∞–µ—Ç—Å—è: –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ (–Ω–µ 500 –æ—à–∏–±–∫–∞)
```

### –¢–µ—Å—Ç 2: API Users
```
URL: https://fermiy.ru/api/users.php
–û–∂–∏–¥–∞–µ—Ç—Å—è: JSON –º–∞—Å—Å–∏–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ë–ï–ó –ø–∞—Ä–æ–ª–µ–π
```

### –¢–µ—Å—Ç 3: Railway Health
```
URL: https://fermiy100githubio-production.up.railway.app/api/health
–û–∂–∏–¥–∞–µ—Ç—Å—è: {"status":"ok","version":"v33.0.0",...}
```

### –¢–µ—Å—Ç 4: –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
```
1. –û—Ç–∫—Ä—ã—Ç—å https://fermiy.ru
2. –í–≤–µ—Å—Ç–∏: director@school.test / password
3. –ù–∞–∂–∞—Ç—å "–í–æ–π—Ç–∏"
–û–∂–∏–¥–∞–µ—Ç—Å—è: –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –ø–∞–Ω–µ–ª—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞
```

## üìù –ß–¢–û –ó–ê–ì–†–£–ó–ò–¢–¨ –ù–ê –•–û–°–¢–ò–ù–ì

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã:
```
‚úÖ index.php (–Ω–æ–≤—ã–π!)
‚úÖ .htaccess
‚úÖ api/ (–≤—Å—è –ø–∞–ø–∫–∞)
‚úÖ data/ (—Å–æ–∑–¥–∞—Ç—å, chmod 755)
   ‚îî‚îÄ‚îÄ users.json (chmod 600)
‚úÖ logs/ (—Å–æ–∑–¥–∞—Ç—å, chmod 755)
‚úÖ cache/ (—Å–æ–∑–¥–∞—Ç—å, chmod 755)
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å:
```
fermiy.ru/
‚îú‚îÄ‚îÄ index.php                    ‚Üê –ù–û–í–´–ô –§–ê–ô–õ!
‚îú‚îÄ‚îÄ .htaccess
‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îú‚îÄ‚îÄ auth/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ login.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ me.php
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ migrate-passwords.php
‚îÇ   ‚îú‚îÄ‚îÄ security/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ validate.php
‚îÇ   ‚îú‚îÄ‚îÄ users.php
‚îÇ   ‚îú‚îÄ‚îÄ users/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ list.php
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ delete.php
‚îÇ   ‚îú‚îÄ‚îÄ profile/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ update.php
‚îÇ   ‚îú‚îÄ‚îÄ menu.php
‚îÇ   ‚îú‚îÄ‚îÄ menu/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ upload.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ clear.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ add.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ delete.php
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ bulk-delete.php
‚îÇ   ‚îî‚îÄ‚îÄ orders/
‚îÇ       ‚îî‚îÄ‚îÄ index.php
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ users.json
‚îÇ   ‚îú‚îÄ‚îÄ menu.json
‚îÇ   ‚îî‚îÄ‚îÄ orders.json
‚îú‚îÄ‚îÄ logs/
‚îÇ   ‚îî‚îÄ‚îÄ security.log
‚îî‚îÄ‚îÄ cache/
```

## üö® –ß–ê–°–¢–´–ï –û–®–ò–ë–ö–ò

### –û—à–∏–±–∫–∞: 500 Internal Server Error
**–†–µ—à–µ–Ω–∏–µ**: 
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ —Ñ–∞–π–ª—ã
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å PHP: `php -l index.php`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Ö–æ—Å—Ç–∏–Ω–≥–∞

### –û—à–∏–±–∫–∞: –ü–∞—Ä–æ–ª–∏ –≤–∏–¥–Ω—ã –≤ API
**–†–µ—à–µ–Ω–∏–µ**: 
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é: `php api/auth/migrate-passwords.php`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `api/users.php` - –¥–æ–ª–∂–µ–Ω —É–¥–∞–ª—è—Ç—å –ø–∞—Ä–æ–ª–∏

### –û—à–∏–±–∫–∞: CORS
**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ headers –≤ PHP —Ñ–∞–π–ª–∞—Ö:
```php
header('Access-Control-Allow-Origin: *');
header('Access-Control-Allow-Methods: GET, POST, PUT, DELETE, OPTIONS');
```

## ‚úÖ –ö–û–ù–¢–†–û–õ–¨–ù–´–ô –°–ü–ò–°–û–ö

–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
- [ ] index.php –∑–∞–≥—Ä—É–∂–µ–Ω
- [ ] .htaccess –∑–∞–≥—Ä—É–∂–µ–Ω
- [ ] –ü–∞–ø–∫–∞ api/ —Å–æ –≤—Å–µ–º–∏ —Ñ–∞–π–ª–∞–º–∏
- [ ] –ü–∞–ø–∫–∞ data/ —Å–æ–∑–¥–∞–Ω–∞ (chmod 755)
- [ ] users.json —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (chmod 600)
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è –ø–∞—Ä–æ–ª–µ–π –≤—ã–ø–æ–ª–Ω–µ–Ω–∞
- [ ] Railway –¥–µ–ø–ª–æ–π –∑–∞–≤–µ—Ä—à–µ–Ω
- [ ] –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- [ ] API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON
- [ ] –í—Ö–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç

## üìû –ï–°–õ–ò –í–°–Å –ï–©–Å –ù–ï –†–ê–ë–û–¢–ê–ï–¢

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Ö–æ—Å—Ç–∏–Ω–≥–∞**:
   - cPanel ‚Üí Errors
   - SSH: `tail -f /var/log/apache2/error.log`

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ PHP**:
   ```bash
   php -v  # –í–µ—Ä—Å–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å >= 7.4
   php -l index.php  # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª—ã**:
   ```bash
   ls -la  # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞
   cat .htaccess  # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥
   ```

## üéØ –û–ñ–ò–î–ê–ï–ú–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢

–ü–æ—Å–ª–µ –≤—Å–µ—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
- ‚úÖ fermiy.ru –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è (—Ñ–æ—Ä–º–∞ –≤—Ö–æ–¥–∞)
- ‚úÖ Railway API —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
- ‚úÖ –ü–∞—Ä–æ–ª–∏ –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- ‚úÖ API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ë–ï–ó –ø–∞—Ä–æ–ª–µ–π

---

**–°—Ç–∞—Ç—É—Å**: üî¥ –¢—Ä–µ–±—É–µ—Ç—Å—è –∑–∞–≥—Ä—É–∑–∫–∞ index.php  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üî• –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô

