<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Force Add Dishes</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; }
        .success { color: green; }
        .error { color: red; }
        button { padding: 10px 20px; margin: 5px; }
        pre { background: #f5f5f5; padding: 10px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>üöÄ Force Add Dishes to Railway</h1>
    
    <div class="test-section">
        <h2>–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –±–ª—é–¥ –≤ Railway</h2>
        <p>–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –¥–æ–±–∞–≤–∏—Ç –≤—Å–µ 15 –±–ª—é–¥ –∏–∑ Excel —Ñ–∞–π–ª–∞ –≤ Railway API</p>
        
        <button onclick="addAllDishes()">–î–æ–±–∞–≤–∏—Ç—å –≤—Å–µ –±–ª—é–¥–∞</button>
        <button onclick="checkMenu()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–µ–Ω—é</button>
        
        <div id="results"></div>
    </div>

    <script>
        const dishes = [
            { name: '–°—É—Ö–∏–µ –∑–∞–≤—Ç—Ä–∞–∫–∏ —Å –º–æ–ª–æ–∫–æ–º', weight: '225 –≥', recipe_number: '1/6' },
            { name: '–û–ª–∞–¥—å–∏', weight: '2 —à—Ç', recipe_number: '11/2' },
            { name: '–ú–æ–ª–æ–∫–æ —Å–≥—É—â–µ–Ω–Ω–æ–µ', weight: '20 –≥', recipe_number: '15/1' },
            { name: '–°–º–µ—Ç–∞–Ω–∞', weight: '20 –≥', recipe_number: '15/7' },
            { name: '–î–∂–µ–º —Ñ—Ä—É–∫—Ç–æ–≤—ã–π', weight: '20 –≥', recipe_number: '15/5' },
            { name: '–ú–µ–¥', weight: '20 –≥', recipe_number: '15/6' },
            { name: '–ú–∞—Å–ª–æ —Å–ª–∏–≤–æ—á–Ω–æ–µ', weight: '10 –≥', recipe_number: '18/7' },
            { name: '–°—ã—Ä', weight: '15 –≥', recipe_number: '18/8' },
            { name: '–ö–æ–ª–±–∞—Å–∞ –≤–∞—Ä–µ–Ω–∞—è', weight: '20 –≥', recipe_number: '18/5' },
            { name: '–ö–æ–ª–±–∞—Å–∞ –≤/–∫', weight: '20 –≥', recipe_number: '18/6' },
            { name: '–í–µ—Ç—á–∏–Ω–∞', weight: '20 –≥', recipe_number: '18/4' },
            { name: '–•–ª–µ–± –∏–∑ –ø—à–µ–Ω–∏—Ü–Ω–æ–π –º—É–∫–∏', weight: '20 –≥', recipe_number: '17/1' },
            { name: '–ß–∞–π —Å —Å–∞—Ö–∞—Ä–æ–º', weight: '200 –≥', recipe_number: '12/2' },
            { name: '–ß–∞–π —Å –º–æ–ª–æ–∫–æ–º', weight: '200 –≥', recipe_number: '12/3' },
            { name: '–ö–∞–∫–∞–æ —Å –º–æ–ª–æ–∫–æ–º', weight: '200 –≥', recipe_number: '12/4' }
        ];

        async function addAllDishes() {
            const div = document.getElementById('results');
            div.innerHTML = '‚è≥ –î–æ–±–∞–≤–ª—è—é –≤—Å–µ –±–ª—é–¥–∞ –≤ Railway...';
            
            let successCount = 0;
            let errorCount = 0;
            
            for (let day = 1; day <= 5; day++) {
                for (let i = 0; i < dishes.length; i++) {
                    const dish = dishes[i];
                    const newDish = {
                        name: dish.name,
                        description: `–ë–ª—é–¥–æ –∏–∑ —à–∫–æ–ª—å–Ω–æ–≥–æ –º–µ–Ω—é Excel —Ñ–∞–π–ª–∞ (–¥–µ–Ω—å ${day})`,
                        price: 0,
                        meal_type: '–∑–∞–≤—Ç—Ä–∞–∫',
                        day_of_week: day,
                        weight: dish.weight,
                        recipe_number: dish.recipe_number
                    };

                    try {
                        const response = await fetch('https://fermiy100githubio-production.up.railway.app/api/menu', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify(newDish)
                        });
                        
                        if (response.ok) {
                            successCount++;
                        } else {
                            errorCount++;
                        }
                    } catch (error) {
                        errorCount++;
                    }
                }
            }
            
            div.innerHTML = `<div class="success">‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –±–ª—é–¥: ${successCount}</div><div class="error">‚ùå –û—à–∏–±–æ–∫: ${errorCount}</div>`;
        }

        async function checkMenu() {
            const div = document.getElementById('results');
            div.innerHTML = '‚è≥ –ü—Ä–æ–≤–µ—Ä—è—é –º–µ–Ω—é...';
            
            try {
                const response = await fetch('https://fermiy100githubio-production.up.railway.app/api/menu');
                const data = await response.json();
                div.innerHTML = `<div class="success">‚úÖ –ú–µ–Ω—é: ${data.length} –±–ª—é–¥</div><pre>${JSON.stringify(data.slice(0, 3), null, 2)}</pre>`;
            } catch (error) {
                div.innerHTML = `<div class="error">‚ùå –û—à–∏–±–∫–∞ –º–µ–Ω—é: ${error.message}</div>`;
            }
        }
    </script>
</body>
</html>
